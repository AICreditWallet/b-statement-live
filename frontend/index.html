<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Supplier Price Watch</title>

  <link rel="stylesheet" href="./styles.css">
  <script defer src="./supplier-price-watch.js"></script>

  <style>
    /* Minimal page-specific styles */
    .wrap { max-width: 980px; margin: 0 auto; padding: 22px 18px 70px; }

    .topBarSimple {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      border-bottom: 1px solid rgba(0,0,0,.08);
      background: #fff;
    }
    .topBarSimple .logo { width: 34px; height: 34px; border-radius: 10px; }
    .topBarSimple .title { font-weight: 1000; font-size: 16px; margin: 0; }
    .topBarSimple .subtitle { font-size: 12px; color: rgba(0,0,0,.6); margin: 2px 0 0; }

    .hero {
      margin-top: 18px;
      padding: 22px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(73,120,255,.92), rgba(73,120,255,.80));
      color: #fff;
      box-shadow: 0 20px 60px rgba(0,0,0,.10);
    }
    .hero h1 {
      font-size: clamp(28px, 4vw, 44px);
      line-height: 1.05;
      margin: 0 0 10px;
      letter-spacing: -0.03em;
    }
    .hero p { margin: 0 0 16px; font-size: 14px; opacity: .95; max-width: 70ch; }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 14px;
      padding: 12px;
    }
    .controls label { font-weight: 900; font-size: 13px; }
    .controls input[type="file"] {
      background: rgba(255,255,255,.92);
      border-radius: 10px;
      padding: 8px;
      border: 0;
      max-width: 100%;
    }

    .btn {
      border: 0;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 1000;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 14px 34px rgba(0,0,0,.18);
      background: #0b1220;
      color: #fff;
      min-width: 140px;
    }
    .btn:disabled { opacity: .55; cursor: not-allowed; box-shadow: none; }

    #status { margin-top: 10px; font-size: 13px; opacity: .92; min-height: 18px; }

    .card {
      margin-top: 16px;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,.08);
      padding: 16px;
      border: 1px solid rgba(0,0,0,.06);
    }

    .muted { color: rgba(0,0,0,.62); font-size: 13px; }
    .hidden { display:none !important; }

    .kpis { display:grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 12px; }
    @media (max-width: 820px){ .kpis{ grid-template-columns: 1fr; } }
    .kpi {
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.07);
      background: #fafbff;
    }
    .kpi .label { font-size: 12px; color: rgba(0,0,0,.62); font-weight: 900; }
    .kpi .value { font-size: 18px; font-weight: 1000; margin-top: 6px; }

    .hr { height: 1px; background: rgba(0,0,0,.08); margin: 14px 0; }

    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    th, td {
      padding: 10px 8px;
      border-bottom: 1px solid rgba(0,0,0,.08);
      font-size: 13px;
      text-align: left;
    }
    th { color: rgba(0,0,0,.65); font-weight: 1000; }
  </style>
</head>

<body>
  <!-- Simple header (no navigation buttons) -->
  <header class="topBarSimple">
    <img class="logo" src="./assets/logo.png" alt="B" />
    <div>
      <div class="title">Supplier Price Watch</div>
      <div class="subtitle">Upload an invoice and track changes over time.</div>
    </div>
  </header>

  <main class="wrap">
    <!-- Simple hero -->
    <section class="hero">
      <h1>Track supplier invoice totals</h1>
      <p>Upload a supplier invoice (PDF or photo) and analyse it. This MVP tracks results on this device.</p>

      <div class="controls">
        <label for="invoiceFile">Invoice</label>
        <input id="invoiceFile" type="file" accept="application/pdf,image/*" />
        <button id="analyseBtn" class="btn" disabled>Analyse</button>
      </div>

      <div id="status"></div>
    </section>

    <!-- Results -->
    <section class="card">
      <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;">
        <div>
          <div style="font-weight: 1000; font-size: 18px;">Results</div>
          <div class="muted" id="resultsHint">Upload an invoice and press Analyse.</div>
        </div>
        <span id="alertPill" class="hidden"></span>
      </div>

      <div id="resultsWrap" class="hidden">
        <div class="hr"></div>

        <div>
          <div style="font-weight: 1000; font-size: 18px;" id="resultsSupplier">—</div>
          <div class="muted" id="resultsMeta">—</div>
        </div>

        <div class="kpis">
          <div class="kpi">
            <div class="label">Invoice total</div>
            <div class="value" id="kpiTotal">£0.00</div>
          </div>
          <div class="kpi">
            <div class="label">Change vs last invoice</div>
            <div class="value" id="kpiChange">—</div>
          </div>
          <div class="kpi">
            <div class="label">Biggest supplier</div>
            <div class="value" id="kpiBiggest">—</div>
          </div>
        </div>

        <div class="hr"></div>

        <div style="font-weight: 1000; margin-bottom: 6px;">Supplier leaderboard</div>
        <table id="leaderTable">
          <thead>
            <tr>
              <th>Supplier</th>
              <th>Total spend</th>
              <th>Last invoice</th>
              <th>Last change</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div class="hr"></div>

        <div style="font-weight: 1000; margin-bottom: 6px;">Focus</div>
        <div class="muted" id="focusText"></div>

        <div class="muted" style="margin-top:10px;">
          MVP: invoice totals are demo-estimated right now. Next step is real OCR extraction.
        </div>
      </div>
    </section>
  </main>
</body>
</html>

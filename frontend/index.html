<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Supplier Price Watch</title>

  <link rel="stylesheet" href="./styles.css">
  <script defer src="./supplier-price-watch.js"></script>

  <style>
    /* Page-specific styles */
    .spwWrap { max-width: 1100px; margin: 0 auto; padding: 22px 18px 70px; }

    /* Make logo smaller on this page */
    .topBar .logo { width: 34px; height: 34px; border-radius: 10px; }

    /* Turn top links into small buttons */
    .navLinks { display:flex; gap:10px; align-items:center; }
    .navLink {
      text-decoration: none;
      font-weight: 800;
      padding: 10px 14px;
      border-radius: 999px;
      background: #fff;
      border: 1px solid rgba(0,0,0,.10);
      color: #0b1220;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      font-size: 13px;
    }
    .navLink:hover { transform: translateY(-1px); }
    .navLink.active { background:#0b1220; color:#fff; border-color: rgba(0,0,0,.15); }

    .spwHero {
      margin: 18px 0 18px;
      padding: 34px 26px;
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(73,120,255,.92), rgba(73,120,255,.80));
      box-shadow: 0 20px 60px rgba(0,0,0,.10);
      color: #fff;
      position: relative;
      overflow: hidden;
    }
    .spwHero h1 {
      font-size: clamp(32px, 4vw, 54px);
      line-height: 1.05;
      margin: 0 0 10px;
      letter-spacing: -0.03em;
    }
    .spwHero p { margin: 0 0 18px; font-size: 16px; opacity: .95; max-width: 72ch; }

    .heroActions {
      display: grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 16px;
      align-items: center;
      margin-top: 14px;
    }
    @media (max-width: 860px){
      .heroActions { grid-template-columns: 1fr; }
    }

    .heroUpload {
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 18px;
      padding: 14px 14px;
      display:flex;
      gap: 12px;
      align-items:center;
      flex-wrap: wrap;
    }

    .heroUpload strong { font-size: 14px; }
    .heroUpload input[type="file"] {
      background: rgba(255,255,255,.88);
      border-radius: 12px;
      padding: 8px;
      border: 0;
      max-width: 100%;
    }

    .heroButtons {
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:flex-start;
      flex-wrap: wrap;
    }

    .spwBtn {
      border: 0;
      border-radius: 999px;
      padding: 14px 18px;
      font-weight: 900;
      cursor: pointer;
      font-size: 15px;
      line-height: 1;
      box-shadow: 0 14px 34px rgba(0,0,0,.18);
    }
    .spwBtn.primary { background: #0b1220; color: #fff; min-width: 160px; }
    .spwBtn.ghost {
      background: rgba(255,255,255,.22);
      color: #fff;
      border: 1px solid rgba(255,255,255,.26);
      box-shadow: none;
      font-weight: 800;
    }
    .spwBtn:disabled { opacity: .55; cursor: not-allowed; }

    .heroStatus {
      font-size: 13px;
      opacity: .92;
      margin-top: 10px;
      min-height: 18px;
    }

    .spwCard {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 12px 40px rgba(0,0,0,.08);
      padding: 18px;
      border: 1px solid rgba(0,0,0,.06);
    }

    .hidden { display:none !important; }
    .muted { color: rgba(0,0,0,.62); font-size: 13px; }

    .pill {
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      border: 1px solid rgba(0,0,0,.08);
      white-space: nowrap;
    }
    .pill.good { background: #eafff1; color: #0b6b2f; }
    .pill.warn { background: #fff6db; color: #8a5a00; }
    .pill.bad  { background: #ffe5e5; color: #8a0000; }

    .spwKpi { display:grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 12px;}
    @media (max-width: 820px){ .spwKpi{ grid-template-columns: 1fr; } }
    .kpiBox {
      padding: 14px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.07);
      background: #fafbff;
    }
    .kpiBox .label { font-size: 12px; color: rgba(0,0,0,.62); font-weight: 800; }
    .kpiBox .value { font-size: 18px; font-weight: 1000; margin-top: 6px; letter-spacing: -0.01em; }

    .hr { height: 1px; background: rgba(0,0,0,.08); margin: 14px 0; }

    .spwTable { width: 100%; border-collapse: collapse; margin-top: 10px; }
    .spwTable th, .spwTable td {
      padding: 10px 8px;
      border-bottom: 1px solid rgba(0,0,0,.08);
      font-size: 13px;
      text-align: left;
    }
    .spwTable th { color: rgba(0,0,0,.65); font-weight: 900; }

    .twoCol {
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
  </style>
</head>

<body>
  <header class="topBar">
    <div class="topBarInner">
      <div class="brand">
        <img class="logo" src="./assets/logo.png" alt="B" />
        <div>
          <div class="brandName">B Statement Check</div>
          <div class="brandTag">Simple fintech tools</div>
        </div>
      </div>

      <nav class="navLinks">
        <a class="navLink" href="./index.html">Bank Statement Check</a>
        <a class="navLink active" href="./supplier-price-watch.html">Supplier Price Watch</a>
      </nav>
    </div>
  </header>

  <main class="spwWrap">
    <section class="spwHero">
      <h1>Catch silent supplier price increases</h1>
      <p>
        Upload any supplier invoice (PDF or phone photo). Click <strong>Analyse</strong> and we’ll show your biggest costs,
        track history, and flag increases next time — in simple English.
      </p>

      <div class="heroActions">
        <div class="heroUpload">
          <strong>Upload invoice</strong>
          <input id="invoiceFile" type="file" accept="application/pdf,image/*" />
          <span class="muted" style="color: rgba(255,255,255,.92);">PDF or photo</span>
        </div>

        <div class="heroButtons">
          <button id="analyseBtn" class="spwBtn primary" disabled>Analyse</button>
          <button id="clearAllBtn" class="spwBtn ghost" title="Clear saved history">Clear history</button>
        </div>
      </div>

      <div id="status" class="heroStatus"></div>
    </section>

    <section class="twoCol">
      <div class="spwCard">
        <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;">
          <div>
            <div style="font-weight: 1000; font-size: 18px;">Results</div>
            <div class="muted" id="resultsHint">Upload an invoice and press <strong>Analyse</strong>.</div>
          </div>
          <span id="alertPill" class="pill good hidden">Ready</span>
        </div>

        <div id="resultsWrap" class="hidden">
          <div class="hr"></div>

          <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start; flex-wrap:wrap;">
            <div>
              <div style="font-weight: 1000; font-size: 18px;" id="resultsSupplier">—</div>
              <div class="muted" id="resultsMeta">—</div>
            </div>
          </div>

          <div class="spwKpi">
            <div class="kpiBox">
              <div class="label">Invoice total</div>
              <div class="value" id="kpiTotal">£0.00</div>
            </div>
            <div class="kpiBox">
              <div class="label">Change vs last invoice</div>
              <div class="value" id="kpiChange">—</div>
            </div>
            <div class="kpiBox">
              <div class="label">Biggest supplier overall</div>
              <div class="value" id="kpiBiggest">—</div>
            </div>
          </div>

          <div class="hr"></div>

          <div style="font-weight: 1000; margin-bottom: 6px;">Supplier cost leaderboard (saved on this device)</div>
          <table class="spwTable" id="leaderTable">
            <thead>
              <tr>
                <th>Supplier</th>
                <th>Total spend (all uploads)</th>
                <th>Last invoice</th>
                <th>Last change</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <div class="hr"></div>

          <div style="font-weight: 1000; margin-bottom: 6px;">What to focus on</div>
          <div class="muted" id="focusText"></div>

          <div class="muted" style="margin-top:10px;">
            ⚠️ MVP note: PDF/photo auto-reading is coming next. This version gives instant results + tracking using your upload history.
          </div>
        </div>
      </div>
    </section>
  </main>
</body>
</html>
